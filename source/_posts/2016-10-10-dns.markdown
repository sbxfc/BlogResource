---
layout: post
title: "DNS查询工具 "
date: 2016-10-10 11:15:36 +0800
comments: true
categories: 
---

#DNS(Domain Name System 域名系统)
域名服务器常见记录类型列表:

代码| 描述 | 功能
------------ | ------------- | ------------- 
A | 主机记录  | 指定域名对应的主机IP地址。
CNAME | 别名记录  | 可以将其他域名指向到A记录,这个别名可以是域名也可以是IP地址
AAAA | IPv6主机记录  | 与A记录对应，用于将特定的域名映射到一个主机的IPv6地址。
MX | 邮件交互记录  | 用于将以该域名为结尾的电子邮件指向对应的邮件服务器以进行处理。
NS | 名称服务器记录 | 当前域下的DNS服务器。

[域名服务器记录类型列表](https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8)

#nslookup

nslookup 是一款非常有用的 DNS 查询工具,可以指定查询类型,可以查到DNS记录的生存时间,还可以指定使用哪个DNS服务器进行解析。

查询指定域名的IP地址:

	$ nslookup
	> rungame.me
	Server:		114.114.114.114
	Address:	114.114.114.114#53
	
	Non-authoritative answer:
	rungame.me	canonical name = sbxfc.github.io.
	sbxfc.github.io	canonical name = github.map.fastly.net.
	github.map.fastly.net	canonical name = prod.github.map.fastlylb.net.
	Name:	prod.github.map.fastlylb.net
	Address: 151.101.36.133
	>exit
	
前面的 Server: 和 Address: 是你电脑所使用的DNS服务器地址,可以看出 rungame.me 的一个别名是 sbxfc.github.io 、github.map.fastly.net、prod.github.map.fastlylb.net 的别名,rungame.me对应的IP地址是 151.101.36.133。

查询域名服务器:
	
	$ nslookup
	> set type=NS
	> sina.com.cn
	Server:		114.114.114.114
	Address:	114.114.114.114#53
	
	Non-authoritative answer:
	sina.com.cn	nameserver = ns4.sina.com.cn.
	sina.com.cn	nameserver = ns2.sina.com.cn.
	sina.com.cn	nameserver = ns1.sina.com.cn.
	sina.com.cn	nameserver = ns3.sina.com.cn.
	
	Authoritative answers can be found from:
	>exit

通过指定DNS服务器来查询域名的IP:

	$ nslookup - 8.8.8.8
	> 163.com
	Server:		8.8.8.8
	Address:	8.8.8.8#53
	
	Non-authoritative answer:
	Name:	163.com
	Address: 123.58.180.8
	Name:	163.com
	Address: 123.58.180.7
	>exit

当然也可以写成这种形式:

	$ nslookup 163.com 8.8.8.8
	
查看邮件服务器:

	$ nslookup
	> set type=MX
	> 163.com
	Server:		114.114.114.114
	Address:	114.114.114.114#53
	
	Non-authoritative answer:
	163.com	mail exchanger = 10 163mx01.mxmail.netease.com.
	163.com	mail exchanger = 10 163mx02.mxmail.netease.com.
	163.com	mail exchanger = 10 163mx03.mxmail.netease.com.
	163.com	mail exchanger = 50 163mx00.mxmail.netease.com.
	
	Authoritative answers can be found from:
	> set type=A
	> 163mx01.mxmail.netease.com
	Server:		114.114.114.114
	Address:	114.114.114.114#53
	
	Non-authoritative answer:
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.138
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.137
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.140
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.142
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.141
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.143
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.139
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.135
	Name:	163mx01.mxmail.netease.com
	Address: 220.181.14.136

#查看顶级域信息

	$ nslookup - 8.8.8.8
	> set type=ns
	> me.
	Server:		8.8.8.8
	Address:	8.8.8.8#53
	
	Non-authoritative answer:
	me	nameserver = a0.cctld.afilias-nst.info.
	me	nameserver = a2.me.afilias-nst.info.
	me	nameserver = b0.cctld.afilias-nst.org.
	me	nameserver = b2.me.afilias-nst.org.
	me	nameserver = c0.cctld.afilias-nst.info.
	me	nameserver = d0.cctld.afilias-nst.org.
	me	nameserver = ns.nic.me.
	me	nameserver = ns2.nic.me.
	
	Authoritative answers can be found from:
	> 

#dig

dig和nslookup的使用类似。

	$ dig soa rungame.me

	; <<>> DiG 9.8.3-P1 <<>> soa rungame.me
	;; global options: +cmd
	;; Got answer:
	;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 28257
	;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0
	
	;; QUESTION SECTION:
	;rungame.me.			IN	SOA
	
	;; ANSWER SECTION:
	rungame.me.		600	IN	SOA	f1g1ns1.dnspod.net. freednsadmin.dnspod.com. 1476082444 3600 180 1209600 180
	
	;; Query time: 371 msec
	;; SERVER: 114.114.114.114#53(114.114.114.114)
	;; WHEN: Mon Oct 10 18:42:26 2016
	;; MSG SIZE  rcvd: 105
	
#参见
- <https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F>
- <https://zh.wikipedia.org/wiki/MX%E8%AE%B0%E5%BD%95>
- <https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E4%BC%BA%E6%9C%8D%E5%99%A8%E8%A8%98%E9%8C%84%E9%A1%9E%E5%9E%8B%E5%88%97%E8%A1%A8>
- <https://www.freebsd.org/doc/zh_CN.UTF-8/books/handbook/network-dns.html>